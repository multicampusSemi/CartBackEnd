package com.project.service;

import java.util.List;
import java.util.Map;

import org.springframework.stereotype.Service;

import com.project.mapper.LjmSemiMapper;

import lombok.RequiredArgsConstructor;

@Service
@RequiredArgsConstructor
public class OrderService {
	private final LjmSemiMapper orderMapper;
	
	public void saveOrder(int userId, List<Map<String, Object>> selectedProducts) {
		selectedProducts.forEach(product -> {
			int productId = Integer.parseInt(product.get("productId").toString());
			int quantity = Integer.parseInt(product.get("quantity").toString());
			int productPrice = Integer.parseInt(product.get("productPrice").toString()); // productPrice 가져오기
			int totalAmount = productPrice * quantity; // totalAmount 계산
			orderMapper.insertOrder(userId, productId, quantity, totalAmount);
		});
	}
}
